version: 0.2

phases:
  install:
    on-failure: ABORT
    runtime-versions:
      java: corretto11
  pre_build:
    on-failure: ABORT
    commands:
    - echo Build start on 'date'
    - dotnet restore
    - dotnet build
    - echo Build ends on 'date'
  build:
    on-failure: ABORT
    commands:
    - echo Build start on 'date'
    - dotnet compile
    - dotnet test
    - echo Build ends on 'date'
  post_build:
    on-failure: ABORT
    commands:
    - echo Build start on 'date'
    - dotnet publish
    - mv target/*.dll helloworld.dll
    - echo Build ends on 'date'

artifacts:
  files:
    - helloworld.dll
  name: hello-world-artifact 
